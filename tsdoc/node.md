## 中间件

中间件就是是一个链表，必须有上一个中间件能拿到下一个中间件，可以在上一个中间件中控制是否执行下一个中间件。这样程序一开始只需要执行第一个中间件就行了，达到了主程序逻辑清晰。中间件的主要作用就是把控制权直接交给上一个节点。

缺点就是初始化中间件链表的时候，需要把所有的后续中间件依赖都传入进去。

```ts
  //这就组成了一个中间件链表
  const ListMid: Mid[] = [ M1, M2, ...]

  //如何控制后一个呢，可以从返回值入手。
  //每个中间件接受一个参数，那就是上一个中间件的返回值，返回值觉得是否执行后续。
  //这样也方便参数传递到后续中间件
  function M1(): number {  return bool ? 0 : 1 }

```